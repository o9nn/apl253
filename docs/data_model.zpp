â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Z++ FORMAL SPECIFICATION: PATTERN LANGUAGE DATA MODEL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

This specification formalizes the data models for the Pattern Language System,
including APL patterns, archetypal patterns, and domain transformation structures.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 SECTION 1: BASE TYPES AND ENUMERATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ PatternNumber â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Basic Type representing a pattern identifier in the APL system             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  PatternNumber == 0 .. 253

  Invariant: Pattern numbers are sequential and unique within the system


â”Œâ”€ AsteriskLevel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Evidence quality indicator for pattern validity                            â”‚
â”‚ 0 = Solution provided but true invariant unknown                           â”‚
â”‚ 1 = Progress made toward invariant                                         â”‚
â”‚ 2 = True invariant - problem cannot be solved without this pattern         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  AsteriskLevel == 0 .. 2


â”Œâ”€ CategoryName â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ The three main categories of the Pattern Language                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  CategoryName ::= Towns | Buildings | Construction


â”Œâ”€ Domain â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ The four domains for archetypal pattern transformation                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  Domain ::= Physical | Social | Conceptual | Psychic


â”Œâ”€ PlaceholderName â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Names of placeholders used in archetypal patterns                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  PlaceholderName ::= 
    domains | frameworks | elements | resources |
    organization_type | influence_type | areas | positions |
    patterns | modes | otherâŸ¦seq StringâŸ§

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 SECTION 2: APL PATTERN LANGUAGE STRUCTURES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ Pattern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Core structure representing a single pattern in Christopher Alexander's    â”‚
â”‚ Pattern Language. Each pattern describes a recurring design problem and    â”‚
â”‚ its solution, with relationships to other patterns.                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  Pattern
    number: PatternNumber
    name: String
    asterisks: AsteriskLevel
    context: String
    problem_summary: String
    problem_details: String
    solution: String
    diagram: String
    connections: String
    preceding_patterns: seq PatternNumber
    following_patterns: seq PatternNumber
  where
    /* Essential fields must be non-empty */
    name â‰  "" âˆ§ 
    problem_summary â‰  "" âˆ§ 
    solution â‰  ""
    
    /* Pattern number uniqueness handled at collection level */
    
    /* Preceding patterns must have smaller numbers */
    âˆ€ p: PatternNumber | p âˆˆ preceding_patterns â‡’ p < number
    
    /* Following patterns must have larger numbers */
    âˆ€ p: PatternNumber | p âˆˆ following_patterns â‡’ p > number
    
    /* Meta-pattern (number 0) has no preceding patterns */
    number = 0 â‡’ preceding_patterns = âŸ¨âŸ©
    
    /* Meta-pattern includes all other patterns as following */
    number = 0 â‡’ following_patterns = âŸ¨1..253âŸ©


â”Œâ”€ PatternSequence â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A sequence groups related patterns that together produce emergent          â”‚
â”‚ phenomena beyond individual pattern effects. 36 sequences organize the     â”‚
â”‚ 253 patterns into coherent design processes.                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  PatternSequence
    id: 1 .. 36
    heading: String
    category: CategoryName
    patterns: seq PatternNumber
    emergent_phenomena: String
  where
    /* Sequence ID must be unique */
    id â‰¥ 1 âˆ§ id â‰¤ 36
    
    /* Must contain at least one pattern */
    patterns â‰  âŸ¨âŸ©
    
    /* All patterns in sequence must be valid pattern numbers */
    âˆ€ p: PatternNumber | p âˆˆ patterns â‡’ p â‰¥ 1 âˆ§ p â‰¤ 253
    
    /* Patterns within sequence should be ordered */
    âˆ€ i, j: â„• | i < j âˆ§ i, j < #patterns â‡’ patterns[i] â‰¤ patterns[j]
    
    /* Category determines valid pattern number ranges */
    (category = Towns â‡’ âˆ€ p âˆˆ patterns â€¢ p â‰¥ 1 âˆ§ p â‰¤ 94) âˆ§
    (category = Buildings â‡’ âˆ€ p âˆˆ patterns â€¢ p â‰¥ 95 âˆ§ p â‰¤ 204) âˆ§
    (category = Construction â‡’ âˆ€ p âˆˆ patterns â€¢ p â‰¥ 205 âˆ§ p â‰¤ 253)


â”Œâ”€ PatternCategory â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ High-level organization of patterns into three main categories, each       â”‚
â”‚ representing a different scale and process of design.                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  PatternCategory
    name: CategoryName
    description: String
    process: String
    pattern_range_start: PatternNumber
    pattern_range_end: PatternNumber
    sequences: seq PatternSequence
  where
    /* Pattern range must be valid and non-empty */
    pattern_range_start â‰¤ pattern_range_end
    
    /* Pattern ranges must not overlap between categories */
    /* and must cover specific ranges */
    (name = Towns â‡’ 
      pattern_range_start = 1 âˆ§ pattern_range_end = 94) âˆ§
    (name = Buildings â‡’ 
      pattern_range_start = 95 âˆ§ pattern_range_end = 204) âˆ§
    (name = Construction â‡’ 
      pattern_range_start = 205 âˆ§ pattern_range_end = 253)
    
    /* All sequences in this category must match the category name */
    âˆ€ s: PatternSequence | s âˆˆ sequences â‡’ s.category = name
    
    /* Sequence IDs for each category must be in specific ranges */
    (name = Towns â‡’ 
      âˆ€ s âˆˆ sequences â€¢ s.id â‰¥ 1 âˆ§ s.id â‰¤ 15) âˆ§
    (name = Buildings â‡’ 
      âˆ€ s âˆˆ sequences â€¢ s.id â‰¥ 16 âˆ§ s.id â‰¤ 28) âˆ§
    (name = Construction â‡’ 
      âˆ€ s âˆˆ sequences â€¢ s.id â‰¥ 29 âˆ§ s.id â‰¤ 36)


â”Œâ”€ UsageInstructions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Meta-information describing how to use the Pattern Language                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  UsageInstructions
    how_to_use: seq String
    choosing_language: seq String
    pattern_hierarchies: AsteriskLevel â†’ String
  where
    /* Must provide instructions for all asterisk levels */
    dom pattern_hierarchies = {0, 1, 2}


â”Œâ”€ PatternLanguage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Top-level structure containing the complete Pattern Language system        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  PatternLanguage
    meta_pattern: Pattern
    categories: seq PatternCategory
    sequences: seq PatternSequence
    usage_instructions: UsageInstructions
  where
    /* Meta-pattern must be pattern number 0 */
    meta_pattern.number = 0
    
    /* Must have exactly 3 categories */
    #categories = 3
    
    /* Categories must be unique and complete */
    âˆƒâ‚ c âˆˆ categories â€¢ c.name = Towns âˆ§
    âˆƒâ‚ c âˆˆ categories â€¢ c.name = Buildings âˆ§
    âˆƒâ‚ c âˆˆ categories â€¢ c.name = Construction
    
    /* Must have exactly 36 sequences */
    #sequences = 36
    
    /* All sequence IDs must be unique */
    âˆ€ sâ‚, sâ‚‚: PatternSequence | sâ‚, sâ‚‚ âˆˆ sequences âˆ§ sâ‚ â‰  sâ‚‚ â‡’ sâ‚.id â‰  sâ‚‚.id
    
    /* Sequences must cover IDs 1 through 36 */
    {s.id | s âˆˆ sequences} = {1..36}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 SECTION 3: ARCHETYPAL PATTERN STRUCTURES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ DomainMapping â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Maps a placeholder to its domain-specific interpretations across all       â”‚
â”‚ four domains (Physical, Social, Conceptual, Psychic)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  DomainMapping
    placeholder: PlaceholderName
    physical: String
    social: String
    conceptual: String
    psychic: String
    description: String
  where
    /* All domain mappings must be non-empty */
    physical â‰  "" âˆ§ social â‰  "" âˆ§ conceptual â‰  "" âˆ§ psychic â‰  ""
    
    /* Description should explain the placeholder's purpose */
    description â‰  ""


â”Œâ”€ ArchetypalPattern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ A generalized pattern template using placeholder syntax {{name}} that      â”‚
â”‚ can be transformed into domain-specific variants. Patterns are organized   â”‚
â”‚ hierarchically with broader (higher-level) and narrower (lower-level)      â”‚
â”‚ relationships forming a connected network.                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ArchetypalPattern
    pattern_id: String
    name: String
    archetypal_pattern: String
    original_template: String
    placeholders: seq PlaceholderName
    domain_mappings: PlaceholderName â‡¶ DomainMapping
    source_file: String
    broader_patterns: seq String
    narrower_patterns: seq String
  where
    /* Pattern ID must be a valid UIA pattern number */
    âˆƒ digits: seq Char | pattern_id = âŸ¨digitsâŸ© âˆ§ #pattern_id â‰¥ 8
    
    /* Archetypal pattern or template must be present */
    archetypal_pattern â‰  "" âˆ¨ original_template â‰  ""
    
    /* If archetypal pattern exists, it should contain placeholders */
    archetypal_pattern â‰  "" â‡’ 
      (placeholders â‰  âŸ¨âŸ© âˆ§
       âˆ€ ph âˆˆ placeholders â€¢ archetypal_pattern contains ("{{" âŒ¢ ph âŒ¢ "}}"))
    
    /* All placeholders used in pattern must have domain mappings */
    âˆ€ ph: PlaceholderName | ph âˆˆ placeholders â‡’ ph âˆˆ dom domain_mappings
    
    /* Domain mappings must be consistent across all placeholders */
    âˆ€ ph âˆˆ dom domain_mappings â€¢ 
      domain_mappings(ph).placeholder = ph
    
    /* Pattern relationships must reference valid pattern IDs */
    âˆ€ pid âˆˆ broader_patterns âˆª narrower_patterns â€¢
      âˆƒ digits: seq Char | pid = âŸ¨digitsâŸ© âˆ§ #pid â‰¥ 8
    
    /* Broader patterns should have smaller pattern numbers (earlier in sequence) */
    âˆ€ bp âˆˆ broader_patterns â€¢ bp < pattern_id
    
    /* Narrower patterns should have larger pattern numbers (later in sequence) */
    âˆ€ np âˆˆ narrower_patterns â€¢ np > pattern_id


â”Œâ”€ PlaceholderDefinition â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Complete definition of a placeholder including all domain mappings         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  PlaceholderDefinition
    placeholder: PlaceholderName
    domains: DomainMapping
    usage_count: â„•
    example_patterns: seq String
  where
    /* Placeholder name must match in mapping */
    domains.placeholder = placeholder
    
    /* Usage count should reflect actual usage */
    usage_count > 0 â‡’ example_patterns â‰  âŸ¨âŸ©


â”Œâ”€ ArchetypalPatternCollection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Complete collection of all archetypal patterns with metadata and           â”‚
â”‚ hierarchical relationships. Contains all 253 patterns from the UIA         â”‚
â”‚ pattern language system.                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ArchetypalPatternCollection
    title: String
    description: String
    total_patterns: â„•
    source_directory: String
    format: String
    patterns: seq ArchetypalPattern
    placeholder_definitions: seq PlaceholderDefinition
  where
    /* Number of patterns must match count */
    #patterns = total_patterns
    
    /* All 253 patterns from UIA system */
    total_patterns = 253
    
    /* Format must describe placeholder syntax */
    format contains "{{"
    
    /* All pattern IDs must be unique */
    âˆ€ pâ‚, pâ‚‚: ArchetypalPattern | 
      pâ‚, pâ‚‚ âˆˆ patterns âˆ§ pâ‚ â‰  pâ‚‚ â‡’ pâ‚.pattern_id â‰  pâ‚‚.pattern_id
    
    /* All placeholder definitions should be used in at least one pattern */
    âˆ€ pd: PlaceholderDefinition | pd âˆˆ placeholder_definitions â‡’
      âˆƒ p: ArchetypalPattern | p âˆˆ patterns âˆ§ pd.placeholder âˆˆ p.placeholders
    
    /* Pattern relationship network must be consistent */
    âˆ€ p: ArchetypalPattern | p âˆˆ patterns â‡’
      (âˆ€ bp âˆˆ p.broader_patterns â€¢
        âˆƒ broader: ArchetypalPattern | 
          broader âˆˆ patterns âˆ§ broader.pattern_id = bp âˆ§
          p.pattern_id âˆˆ broader.narrower_patterns) âˆ§
      (âˆ€ np âˆˆ p.narrower_patterns â€¢
        âˆƒ narrower: ArchetypalPattern |
          narrower âˆˆ patterns âˆ§ narrower.pattern_id = np âˆ§
          p.pattern_id âˆˆ narrower.broader_patterns)
    
    /* First pattern (12610010) should have no broader patterns */
    âˆƒ first: ArchetypalPattern | 
      first âˆˆ patterns âˆ§ first.pattern_id = "12610010" â‡’
        first.broader_patterns = âŸ¨âŸ©
    
    /* Last patterns may have no narrower patterns (leaf nodes) */
    âˆƒ leaves: â„™ ArchetypalPattern | 
      leaves âŠ† patterns âˆ§
      (âˆ€ leaf âˆˆ leaves â€¢ leaf.narrower_patterns = âŸ¨âŸ©)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 SECTION 4: DOMAIN TRANSFORMATION STRUCTURES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ TransformedPattern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Result of applying domain-specific mappings to an archetypal pattern       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  TransformedPattern
    source_pattern_id: String
    target_domain: Domain
    transformed_text: String
    substitutions: PlaceholderName â‡¶ String
  where
    /* Transformed text should not contain unreplaced placeholders */
    Â¬(transformed_text contains "{{")
    
    /* All substitutions must be applied */
    âˆ€ ph âˆˆ dom substitutions â€¢ 
      transformed_text contains substitutions(ph)


â”Œâ”€ DomainTransformationRule â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Rule defining how to transform from archetypal to domain-specific          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  DomainTransformationRule
    source_placeholder: PlaceholderName
    target_domain: Domain
    transformation: String
  where
    /* Transformation must be non-empty */
    transformation â‰  ""


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 SECTION 5: VALIDATION PREDICATES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ ValidPattern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Predicate determining if a Pattern is well-formed                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ValidPattern: Pattern â†’ ğ”¹
  
  âˆ€ p: Pattern â€¢
    ValidPattern(p) âŸº
      p.name â‰  "" âˆ§
      p.problem_summary â‰  "" âˆ§
      p.solution â‰  "" âˆ§
      p.number â‰¥ 0 âˆ§ p.number â‰¤ 253 âˆ§
      p.asterisks âˆˆ {0, 1, 2} âˆ§
      (âˆ€ preceding âˆˆ p.preceding_patterns â€¢ preceding < p.number) âˆ§
      (âˆ€ following âˆˆ p.following_patterns â€¢ following > p.number)


â”Œâ”€ ValidArchetypalPattern â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Predicate determining if an ArchetypalPattern is well-formed with proper   â”‚
â”‚ hierarchical relationships                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  ValidArchetypalPattern: ArchetypalPattern â†’ ğ”¹
  
  âˆ€ ap: ArchetypalPattern â€¢
    ValidArchetypalPattern(ap) âŸº
      ap.pattern_id â‰  "" âˆ§
      ap.name â‰  "" âˆ§
      (ap.archetypal_pattern â‰  "" âˆ¨ ap.original_template â‰  "") âˆ§
      (ap.archetypal_pattern â‰  "" â‡’
        (ap.placeholders â‰  âŸ¨âŸ© âˆ§
         âˆ€ ph âˆˆ ap.placeholders â€¢ ph âˆˆ dom ap.domain_mappings âˆ§
         âˆ€ ph âˆˆ ap.placeholders â€¢ 
           ap.archetypal_pattern contains ("{{" âŒ¢ ph âŒ¢ "}}"))) âˆ§
      (âˆ€ bp âˆˆ ap.broader_patterns â€¢ bp < ap.pattern_id) âˆ§
      (âˆ€ np âˆˆ ap.narrower_patterns â€¢ np > ap.pattern_id)


â”Œâ”€ CompleteDomainMapping â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Predicate verifying all domains are mapped for a placeholder               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  CompleteDomainMapping: DomainMapping â†’ ğ”¹
  
  âˆ€ dm: DomainMapping â€¢
    CompleteDomainMapping(dm) âŸº
      dm.physical â‰  "" âˆ§
      dm.social â‰  "" âˆ§
      dm.conceptual â‰  "" âˆ§
      dm.psychic â‰  ""

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 END OF DATA MODEL SPECIFICATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
